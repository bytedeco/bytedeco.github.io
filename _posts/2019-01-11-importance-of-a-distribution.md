---
layout: post
title: The importance of a distribution
---

Happy New Year! We were able to deliver yet another release on time. Version 1.4.4 is available for [JavaCPP](https://github.com/bytedeco/javacpp), [JavaCPP Presets](https://github.com/bytedeco/javacpp-presets), [JavaCV](https://github.com/bytedeco/javacv), [ProCamCalib](https://github.com/bytedeco/procamcalib), and [ProCamTracker](https://github.com/bytedeco/procamtracker). Many thanks to all contributors! Since the [previous post]({% post_url 2018-07-17-bytedeco-as-distribution %}), according to `git shortlog 1.4.2..1.4.4 --summary`, they were:

> Alex Merritt, Aman Gupta, Ao Qi, bitstormGER, deinhofer, Deividi, eguid, EmergentOrder, Gertjan Al, HGuillemet, Jarek Sacha, Jeremy Apthorp, kigkrazy, lloydmeta, louxiu, nahojjjen, Nico Hezel, renderdude, Samuel Audet, Taha Emara, vimalaguti, vincent-grosbois, wumo, Yuta Okamoto, Zayin Krige

Many thanks as well to those not on this list but who helped fix CI settings, test builds, debug code, file suggestions, make corrections, report bugs, propose ideas, update wiki pages, etc. As usual this release fixes many issues and contains a lot of updates, all the details can be found in the `CHANGELOG.md` files, but one important change concerns MXNet, whose Scala API is now partially usable from Java. Consequently, the [JavaCPP Presets for MXNet](https://github.com/bytedeco/javacpp-presets/tree/master/mxnet) now also bundle the official Scala API, just as with the official Java APIs of OpenCV and TensorFlow. Given these developments, there is one question that keeps coming up over and over again: Why do we need a distribution like Bytedeco even if everyone shows up with Java APIs on their own?

Well, for one thing, the feature set exposed by these official APIs for Java is very limited, so many users still require access to the C/C++, Scala, or even Python APIs. Moreover, PyTorch is slated to become the first deep learning framework with [a full-featured and easy-to-use C++ API](https://pytorch.org/cppdocs/), but with no plans in sight for Java, so once the C++ API becomes usable we intend on integrating it to Bytedeco as part of the JavaCPP Presets, see issue [bytedeco/javacpp-presets#623](https://github.com/bytedeco/javacpp-presets/issues/623).

Another reason could be that JavaCPP provides a set of basic classes as foundation for native libraries, such as [`PointerScope`](http://bytedeco.org/javacpp/apidocs/org/bytedeco/javacpp/PointerScope.html) introduced in the [previous post]({% post_url 2018-07-17-bytedeco-as-distribution %}). Thanks to Herv√© Guillemet and Sam Carlberg, they will also soon support the Java Platfom Module System (JPMS), including `jlink`, something that the upstream projects have no plans to provide for their Java APIs. (A preview version of OpenCV is already available on the [`jpms` branch](https://github.com/bytedeco/javacpp-presets/tree/jpms/opencv) with corresponding snapshot artifacts.) Although [Project Panama](http://openjdk.java.net/projects/panama/) promises to offer most of the features that [JavaCPP already provides today](/faq/), delivery is expected only in a few more years, faster-than-JNI performance is not a priority, development for C++ has yet to start, and it does not aspire to support platforms such as Android and iOS. Though, even in the case of plain Java SE, a loader for native libraries is required, something that community members such as [Johan Vos understand](https://mail.openjdk.java.net/pipermail/workshop-discuss/2018-July/000007.html), but there are no plans to integrate such functionality to OpenJDK. Unless a fork like [Corretto](https://github.com/corretto) happens to stimulate evolution towards the demands of contemporary software development, I am afraid the need for a third-party tool like JavaCPP is here to stay for the foreseeable future.

Nevertheless, assuming that Project Panama succeeds and renders JavaCPP obsolete&mdash;which would be awesome, although doubtful based on the discussion above, but just for the sake of the argument&mdash;the need for a distribution like Bytedeco will remain. The redistributable binaries for [CUDA](https://developer.nvidia.com/cuda-downloads) are over 2 GB for all supported platforms, compressed, and similarly for [MKL](https://software.intel.com/en-us/mkl), which is about 0.5 GB for all supported platforms. These include aggressively optimized implementations of BLAS, LAPACK, and FFTW, among many other things, achieving at least 10&times; speedups over *anything* one could possibly write in pure Java today. (Project Panama also promises to fix this for CPUs, eventually, but not for GPUs.) Their files are currently bundled by Bytedeco and shared by, for instance, [Deeplearning4j](https://deeplearning4j.org/), and the [JavaCPP Presets for OpenCV, Caffe, MXNet, and TensorFlow](https://github.com/bytedeco/javacpp-presets). To offer a user-friendly experience, if each of these projects were to start bundling CUDA and MKL for all platforms on their own, an application depending on all those libraries may very well end up bundling over 10 GB of duplicate code! Projects competing against each other either downstream or upstream cannot offer such redistributables as shared resources: That is the role of a distribution. The goal is to make all those libraries, including the JDK itself, work well together.

Right now, unless we are misinformed, Bytedeco is the only such distribution available for Java, however small it may be, which is indeed quite sad, but I hope this post helps spur more cooperation or, at the very least, some competition. There is still much to be done before the community at large begins to recognize the clear necessity for Java distributions of native libraries that work not only with Java SE on Linux, Mac, and Windows, but also for mobiles and embedded platforms such as Android, iOS, and Raspberry Pi.

More concretely, to attain these goals, we will have to start putting more resources in priority into the following efforts:

 * Obtain more visibility, gain a wider sense of community, by
   * Writing more blog posts, on a fancier web site,
   * Meeting people in person at conferences, workshops, etc, and
   * Participating in upstream projects, driving acceptance by their developers and users, by
     * Reporting bugs and helping to fix them, and even by
     * Contributing and maintaining JavaCPP-based wrappers upstream, among other things;
 * Aim for fully automated bindings generation for the features of C++ most widely used by native libraries,
   * In all probability with the help of [libclang](https://clang.llvm.org/docs/Tooling.html), see issue [bytedeco/javacpp#51](https://github.com/bytedeco/javacpp/issues/51) and the [samples in Java](https://github.com/bytedeco/javacpp-presets/tree/master/llvm/samples/); and
 * Keep [creating new presets](https://github.com/bytedeco/javacpp-presets/wiki/Create-New-Presets) for additional native libraries, *plus* maintain them up-to-date with upstream projects.

A lot of help is going to be required to realize all this, so please spread the word! To contribute yourself to one of the items listed above, please communicate via the [mailing list from Google Groups](http://groups.google.com/group/javacpp-project), [issues on GitHub](https://github.com/bytedeco/javacpp/issues), or [the chat room at Gitter](https://gitter.im/bytedeco/javacpp). We are looking forward to continue working with everyone on all these projects this year as well!
